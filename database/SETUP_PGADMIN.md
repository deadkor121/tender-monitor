# üêò –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –¥–ª—è Tender Monitor

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ pgAdmin

1. **–û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin 4**

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:**
   - –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ: `Servers` ‚Üí `PostgreSQL 17`
   - –ï—Å–ª–∏ –ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å - –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ PostgreSQL

3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –ù–∞–∂–º–∏—Ç–µ –ü–ö–ú –Ω–∞ `Databases`
   - –í—ã–±–µ—Ä–∏—Ç–µ `Create` ‚Üí `Database...`
   
   ![Create Database](https://i.imgur.com/example.png)

4. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:**
   ```
   Database: tender_monitor
   Owner: postgres (–∏–ª–∏ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   Encoding: UTF8
   ```
   
   –ù–∞–∂–º–∏—Ç–µ `Save`

5. **–û—Ç–∫—Ä–æ–π—Ç–µ Query Tool:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ë–î `tender_monitor`
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É `Query Tool` (‚ö° –º–æ–ª–Ω–∏—è) –∏–ª–∏ `Tools` ‚Üí `Query Tool`

6. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `database/create-database.sql`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Ç–µ–∫—Å—Ç
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ Query Tool
   - –ù–∞–∂–º–∏—Ç–µ `Execute` (F5) –∏–ª–∏ –∫–Ω–æ–ø–∫—É ‚ñ∂Ô∏è

7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```sql
   -- –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:
   SELECT tablename FROM pg_tables 
   WHERE schemaname = 'public' 
   ORDER BY tablename;
   ```
   
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 9 —Ç–∞–±–ª–∏—Ü:
   - tenders
   - favorites
   - viewed
   - notes
   - tender_statuses
   - priorities
   - tags
   - reminders
   - filter_presets

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```env
# PostgreSQL Database
DB_TYPE=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_NAME=tender_monitor
DB_USER=postgres
DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å_postgres
```

## –®–∞–≥ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –∏–∑ SQLite:

```bash
node migrate-sqlite-to-postgres.js
```

## –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
npm start
```

---

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ç–µ–Ω–¥–µ—Ä–æ–≤
```sql
SELECT id, title, source, scraped_at 
FROM tenders 
ORDER BY scraped_at DESC 
LIMIT 10;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```sql
SELECT * FROM stats_by_source;
SELECT * FROM stats_by_category LIMIT 10;
```

### –ü–æ–∏—Å–∫
```sql
SELECT * FROM search_tenders('—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ');
```

### –í—Å–µ —Ç–µ–Ω–¥–µ—Ä—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
```sql
SELECT * FROM tenders_full LIMIT 10;
```

### –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã (–û–°–¢–û–†–û–ñ–ù–û!)
```sql
TRUNCATE tenders CASCADE;
```

---

## üîß Troubleshooting

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
Error: connect ECONNREFUSED 127.0.0.1:5432
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω:
   ```powershell
   Get-Service postgresql-x64-17
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:
   ```powershell
   Start-Service postgresql-x64-17
   ```

### –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```
Error: password authentication failed for user "postgres"
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ `.env`
2. –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ pgAdmin:
   - –ü–ö–ú –Ω–∞ `Login/Group Roles` ‚Üí `postgres`
   - `Properties` ‚Üí `Definition` ‚Üí –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å

### –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ SQL —Å–∫—Ä–∏–ø—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`tender_monitor`)

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ Views –¥–ª—è —É–¥–æ–±–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite!
